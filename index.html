<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="tailwind.css" />
    <title>Age Calculator App</title>
  </head>
  <body class="flex items-center justify-center h-dvh bg-[#f0f0f0]">
    <div
      class="w-xl lg:w-2xl h-fit p-10 bg-white rounded-xl rounded-br-[100px]"
    >
      <div>
        <form action="">
          <div class="flex gap-7 flex-row items-center">
            <div class="flex gap-3 flex-col">
              <label
                for="day"
                id="day-label"
                class="text-gray-500 text-md font-bold uppercase tracking-widest"
                >day</label
              >
              <input
                type="number"
                name="day"
                id="day"
                placeholder="dd"
                class="outline-0 border-2 rounded-md border-gray-300 p-4 lg:p-5 w-32 lg:w-36 h-14 lg:h-16 text-left text-4xl leading-9 font-bold placeholder:text-3xl lg:placeholder:text-4xl placeholder:leading-8 lg:placeholder:leading-10 placeholder:text-start placeholder:font-bold placeholder:text-gray-600 placeholder:uppercase hover:border-[#864cff] focus:border-[#864cff] transition-all caret-[#864cff]"
              />
              <p class="day-error text-[#ff5757]"></p>
            </div>
            <div class="flex gap-3 flex-col">
              <label
                for="month"
                id="month-label"
                class="text-gray-500 text-md font-bold uppercase tracking-widest"
                >month</label
              >
              <input
                type="number"
                name="month"
                id="month"
                placeholder="mm"
                class="outline-0 border-2 rounded-md border-gray-300 p-4 lg:p-5 w-32 lg:w-36 h-14 lg:h-16 text-left text-4xl leading-9 font-bold placeholder:text-3xl lg:placeholder:text-4xl placeholder:leading-8 lg:placeholder:leading-10 placeholder:text-start placeholder:font-bold placeholder:text-gray-600 placeholder:uppercase hover:border-[#864cff] focus:border-[#864cff] transition-all caret-[#864cff]"
              />
              <p class="month-error text-[#ff5757]"></p>
            </div>
            <div class="flex gap-3 flex-col">
              <label
                for="year"
                id="year-label"
                class="text-gray-500 text-md font-bold uppercase tracking-widest"
                >year</label
              >
              <input
                type="number"
                name="year"
                id="year"
                placeholder="yyyy"
                class="outline-0 border-2 rounded-md border-gray-300 p-4 lg:p-5 w-32 lg:w-36 h-14 lg:h-16 text-left text-4xl leading-9 font-bold placeholder:text-3xl lg:placeholder:text-4xl placeholder:leading-8 lg:placeholder:leading-10 placeholder:text-start placeholder:font-bold placeholder:text-gray-600 placeholder:uppercase hover:border-[#864cff] focus:border-[#864cff] transition-all caret-[#864cff]"
              />
              <p class="year-error text-[#ff5757]"></p>
            </div>
          </div>
          <p class="invalid-date-error text-[#ff5757]"></p>
          <div
            class="rounded-full relative mt-12 lg:mt-8 bg-gray-300 h-[0.2px] w-full"
          >
            <button
              class="calculate-age bg-[#864cff] hover:bg-black transition-all cursor-pointer rounded-full p-3 absolute right-1/2 lg:right-0 top-1/2 translate-x-1/2 lg:-translate-x-0 -translate-y-1/2"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="32"
                height="32"
                viewBox="0 0 24 24"
              >
                <path
                  fill="#ffffff"
                  d="M11.998 20.92q-.16 0-.296-.057t-.267-.186l-5.427-5.421q-.14-.14-.15-.344t.13-.35q.146-.166.357-.156q.21.01.357.156l4.798 4.784V12.73q0-.213.144-.356t.357-.144t.356.144t.143.356v6.637l4.823-4.804q.136-.14.339-.14t.353.145q.137.134.137.341t-.14.348l-5.446 5.421q-.132.13-.27.187t-.298.055m.001-10.69q-.213 0-.356-.144T11.5 9.73v-2q0-.213.144-.357t.357-.143t.356.143t.143.357v2.019q0 .205-.144.343t-.357.138m0-5q-.213 0-.356-.144T11.5 4.73v-1q0-.213.144-.356t.357-.144t.356.144t.143.356v1.019q0 .205-.144.343t-.357.138"
                />
              </svg>
            </button>
          </div>
        </form>
      </div>

      <div class="mt-12 lg:mt-8">
        <div>
          <p
            class="font-extrabold italic text-6xl lg:text-7xl leading-16 lg:leading-[86px] tracking-wider"
          >
            <span class="result-year text-[#864cff]">--</span>years
          </p>
        </div>
        <div>
          <p
            class="font-extrabold italic text-6xl lg:text-7xl leading-16 lg:leading-[86px] tracking-wider"
          >
            <span class="result-month text-[#864cff]">--</span>months
          </p>
        </div>
        <div>
          <p
            class="font-extrabold italic text-6xl lg:text-7xl leading-16 lg:leading-[86px] tracking-wider"
          >
            <span class="result-day text-[#864cff]">--</span>days
          </p>
        </div>
      </div>
    </div>

    <script>
      document
        .querySelector(".calculate-age")
        .addEventListener("click", (event) => {
          event.preventDefault();

          const day = document.getElementById("day").value;
          const month = document.getElementById("month").value;
          const year = document.getElementById("year").value;

          const resultYear = document.getElementsByClassName("result-year")[0];
          const resultMonth =
            document.getElementsByClassName("result-month")[0];
          const resultDate = document.getElementsByClassName("result-day")[0];

          const invalidDateError =
            document.getElementsByClassName("invalid-date-error")[0];

          const birthDate = new Date(`${year}-${month}-${day}`);

          const today = new Date();

          let years = today.getFullYear() - birthDate.getFullYear();
          let months = today.getMonth() - birthDate.getMonth();
          let days = today.getDate() - birthDate.getDate();

          if (days < 0) {
            months--;
            const prevMonth = new Date(
              today.getFullYear(),
              today.getMonth(),
              0
            );
            days += prevMonth.getDate();
          }

          if (months < 0) {
            years--;
            months += 12;
          }

          console.log(new Date(birthDate));

          const dayError = document.getElementsByClassName("day-error")[0];
          const monthError = document.getElementsByClassName("month-error")[0];
          const yearError = document.getElementsByClassName("year-error")[0];

          const dayInput = document.getElementById("day");
          const dayLabel = document.getElementById("day-label");
          const monthInput = document.getElementById("month");
          const monthLabel = document.getElementById("month-label");
          const yearInput = document.getElementById("year");
          const yearLabel = document.getElementById("year-label");

          resultYear.innerHTML = "--";
          resultMonth.innerHTML = "--";
          resultDate.innerHTML = "--";

          let hasError = false;

          if (day === "") {
            dayError.innerHTML = "This feild is requied";
            dayInput.classList.remove("border-gray-300");
            dayInput.classList.add("border-[#ff5757]");
            dayLabel.classList.remove("text-gray-500");
            dayLabel.classList.add("text-[#ff5757]");
            hasError = true;
          } else if (day < 1 || day > 31) {
            dayError.innerHTML = "Must be a valid day";
            dayInput.classList.remove("border-gray-300");
            dayInput.classList.add("border-[#ff5757]");
            dayLabel.classList.remove("text-gray-500");
            dayLabel.classList.add("text-[#ff5757]");
            hasError = true;
          } else {
            dayError.innerHTML = "";
            dayInput.classList.add("border-gray-300");
            dayInput.classList.remove("border-[#ff5757]");
            dayLabel.classList.add("text-gray-500");
            dayLabel.classList.remove("text-[#ff5757]");
          }

          if (month === "") {
            monthError.innerHTML = "This feild is requied";
            monthInput.classList.remove("border-gray-300");
            monthInput.classList.add("border-[#ff5757]");
            monthLabel.classList.remove("text-gray-500");
            monthLabel.classList.add("text-[#ff5757]");
            hasError = true;
          } else if (month < 1 || month > 12) {
            monthError.innerHTML = "Must be a valid month";
            monthInput.classList.remove("border-gray-300");
            monthInput.classList.add("border-[#ff5757]");
            monthLabel.classList.remove("text-gray-500");
            monthLabel.classList.add("text-[#ff5757]");
            hasError = true;
          } else {
            monthError.innerHTML = "";
            monthInput.classList.add("border-gray-300");
            monthInput.classList.remove("border-[#ff5757]");
            monthLabel.classList.add("text-gray-500");
            monthLabel.classList.remove("text-[#ff5757]");
          }

          if (year === "") {
            yearError.innerHTML = "This feild is requied";
            yearInput.classList.remove("border-gray-300");
            yearInput.classList.add("border-[#ff5757]");
            yearLabel.classList.remove("text-gray-500");
            yearLabel.classList.add("text-[#ff5757]");
            hasError = true;
          } else if (year < 1000) {
            yearError.innerHTML = "Must be a valid year";
            yearInput.classList.remove("border-gray-300");
            yearInput.classList.add("border-[#ff5757]");
            yearLabel.classList.remove("text-gray-500");
            yearLabel.classList.add("text-[#ff5757]");
            hasError = true;
          } else if (year > today.getFullYear()) {
            yearError.innerHTML = "Must be in the past";
            yearInput.classList.remove("border-gray-300");
            yearInput.classList.add("border-[#ff5757]");
            yearLabel.classList.remove("text-gray-500");
            yearLabel.classList.add("text-[#ff5757]");
            hasError = true;
          } else {
            if (month > today.getMonth()) {
              monthError.innerHTML = "Must be a valid month";
              monthInput.classList.remove("border-gray-300");
              monthInput.classList.add("border-[#ff5757]");
              monthLabel.classList.remove("text-gray-500");
              monthLabel.classList.add("text-[#ff5757]");
              hasError = true;
            } else {
              yearError.innerHTML = "";
              yearInput.classList.add("border-gray-300");
              yearInput.classList.remove("border-[#ff5757]");
              yearLabel.classList.add("text-gray-500");
              yearLabel.classList.remove("text-[#ff5757]");
            }
          }

          if (hasError) return;

          if (new Date(birthDate)) {
            resultYear.innerHTML = years;

            if (Math.abs(months).toString().length < 3) {
              resultMonth.innerHTML = "0" + months;
            } else {
              resultMonth.innerHTML = months;
            }

            if (Math.abs(days).toString().length < 2) {
              resultDate.innerHTML = "0" + days;
            } else {
              resultDate.innerHTML = days;
            }
          } else {
            invalidDateError.innerHTML = "Invalid Date";
          }
        });
    </script>
  </body>
</html>
